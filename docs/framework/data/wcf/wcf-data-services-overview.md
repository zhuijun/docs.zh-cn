---
title: WCF 数据服务概述
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services
- WCF Data Services, about
ms.assetid: 7924cf94-c9a6-4015-afc9-f5d22b1743bb
ms.openlocfilehash: a1844ab3449b6bce526276eba693a1f2da0ebf6b
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/24/2020
ms.locfileid: "91202170"
---
# <a name="wcf-data-services-overview"></a><span data-ttu-id="f53ed-102">WCF 数据服务概述</span><span class="sxs-lookup"><span data-stu-id="f53ed-102">WCF Data Services Overview</span></span>

<span data-ttu-id="f53ed-103">WCF 数据服务可以通过使用 Open Data Protocol (OData) 来创建和使用 Web 或 intranet 的数据服务。</span><span class="sxs-lookup"><span data-stu-id="f53ed-103">WCF Data Services enables creation and consumption of data services for the Web or an intranet by using the Open Data Protocol (OData).</span></span> <span data-ttu-id="f53ed-104">OData 使你能够将数据公开为可通过 Uri 进行寻址的资源。</span><span class="sxs-lookup"><span data-stu-id="f53ed-104">OData enables you to expose your data as resources that are addressable by URIs.</span></span> <span data-ttu-id="f53ed-105">这样，您就可以通过使用具象状态传输 (REST) 的语义（尤其是标准 HTTP 谓词 GET、PUT、POST 和 DELETE）来访问和更改数据。</span><span class="sxs-lookup"><span data-stu-id="f53ed-105">This enables you to access and change data by using the semantics of representational state transfer (REST), specifically the standard HTTP verbs of GET, PUT, POST, and DELETE.</span></span> <span data-ttu-id="f53ed-106">本主题概述 OData 定义的模式和实践，并概述 WCF 数据服务提供的工具，以利用基于 .NET Framework 的应用程序中的 OData。</span><span class="sxs-lookup"><span data-stu-id="f53ed-106">This topic provides an overview of both the patterns and practices defined by OData and also the facilities provided by WCF Data Services to take advantage of OData in .NET Framework-based applications.</span></span>  
  
## <a name="address-data-as-resources"></a><span data-ttu-id="f53ed-107">以资源形式对数据进行寻址</span><span class="sxs-lookup"><span data-stu-id="f53ed-107">Address Data as Resources</span></span>  

 <span data-ttu-id="f53ed-108">OData 将数据公开为可通过 URI 进行寻址的资源。</span><span class="sxs-lookup"><span data-stu-id="f53ed-108">OData exposes data as resources that are addressable by URIs.</span></span> <span data-ttu-id="f53ed-109">基于实体数据模型的实体关系约定构造资源路径。</span><span class="sxs-lookup"><span data-stu-id="f53ed-109">The resource paths are constructed based on the entity-relationship conventions of the Entity Data Model.</span></span> <span data-ttu-id="f53ed-110">在此模型中，实体表示应用程序域中数据的操作单元，例如客户、订单、项目和产品。</span><span class="sxs-lookup"><span data-stu-id="f53ed-110">In this model, entities represent operational units of data in an application domain, such as customers, orders, items, and products.</span></span> <span data-ttu-id="f53ed-111">有关详细信息，请参阅 [实体数据模型](../adonet/entity-data-model.md)。</span><span class="sxs-lookup"><span data-stu-id="f53ed-111">For more information, see [Entity Data Model](../adonet/entity-data-model.md).</span></span>  
  
 <span data-ttu-id="f53ed-112">在 OData 中，将实体资源作为包含实体类型实例的实体集进行寻址。</span><span class="sxs-lookup"><span data-stu-id="f53ed-112">In OData, you address entity resources as an entity set that contains instances of entity types.</span></span> <span data-ttu-id="f53ed-113">例如，URI `https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/Orders` 返回 `Northwind` 数据服务中与值为的客户相关的所有订单 `CustomerID``ALFKI.`</span><span class="sxs-lookup"><span data-stu-id="f53ed-113">For example, the URI `https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/Orders` returns all of the orders from the `Northwind` data service that are related to the customer with a `CustomerID` value of `ALFKI.`</span></span>  
  
 <span data-ttu-id="f53ed-114">利用查询表达式，可以对资源执行传统的查询操作，如筛选、排序和分页。</span><span class="sxs-lookup"><span data-stu-id="f53ed-114">Query expressions enable you to perform traditional query operations against resources, such as filtering, sorting, and paging.</span></span> <span data-ttu-id="f53ed-115">例如，URI `https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/Orders?$filter=Freight gt 50` 对资源进行筛选，以仅返回运费高于 50 美元的订单。</span><span class="sxs-lookup"><span data-stu-id="f53ed-115">For example, the URI `https://services.odata.org/Northwind/Northwind.svc/Customers('ALFKI')/Orders?$filter=Freight gt 50` filters the resources to return only the orders with a freight cost of more than $50.</span></span> <span data-ttu-id="f53ed-116">有关详细信息，请参阅 [访问数据服务资源](accessing-data-service-resources-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="f53ed-116">For more information, see [Accessing Data Service Resources](accessing-data-service-resources-wcf-data-services.md).</span></span>  
  
## <a name="interoperable-data-access"></a><span data-ttu-id="f53ed-117">可互操作的数据访问</span><span class="sxs-lookup"><span data-stu-id="f53ed-117">Interoperable Data Access</span></span>  

 <span data-ttu-id="f53ed-118">OData 基于标准 Internet 协议建立，使数据服务可与不使用 .NET Framework 的应用程序进行互操作。</span><span class="sxs-lookup"><span data-stu-id="f53ed-118">OData builds on standard Internet protocols to make data services interoperable with applications that do not use the .NET Framework.</span></span> <span data-ttu-id="f53ed-119">由于您可以使用标准 URI 对数据进行寻址，因此应用程序可以通过使用具象状态传输 (REST) 的语义（尤其是标准 HTTP 谓词 GET、PUT、POST 和 DELETE）来访问和更改数据。</span><span class="sxs-lookup"><span data-stu-id="f53ed-119">Because you can use standard URIs to address data, your application can access and change data by using the semantics of representational state transfer (REST), specifically the standard HTTP verbs of GET, PUT, POST, and DELETE.</span></span> <span data-ttu-id="f53ed-120">这样您就可以从任何可分析和访问通过标准 HTTP 协议传输的数据的客户端访问这些服务。</span><span class="sxs-lookup"><span data-stu-id="f53ed-120">This enables you to access these services from any client that can parse and access data that is transmitted over standard HTTP protocols.</span></span>  
  
<span data-ttu-id="f53ed-121">OData)  (AtomPub 定义一组对 Atom 发布协议的扩展。</span><span class="sxs-lookup"><span data-stu-id="f53ed-121">OData defines a set of extensions to the Atom Publishing Protocol (AtomPub).</span></span> <span data-ttu-id="f53ed-122">它支持采用多种数据格式的 HTTP 请求和响应，以适应各种客户端应用程序和平台。</span><span class="sxs-lookup"><span data-stu-id="f53ed-122">It supports HTTP requests and responses in more than one data format to accommodate various client applications and platforms.</span></span> <span data-ttu-id="f53ed-123">OData 数据源可以表示 Atom 中的数据，JavaScript 对象表示法 (JSON) ，以及纯 XML 格式。</span><span class="sxs-lookup"><span data-stu-id="f53ed-123">An OData feed can represent data in Atom, JavaScript Object Notation (JSON), and as plain XML.</span></span> <span data-ttu-id="f53ed-124">尽管 Atom 是默认格式，但源的格式会在 HTTP 请求的标头中指定。</span><span class="sxs-lookup"><span data-stu-id="f53ed-124">While Atom is the default format, the format of the feed is specified in the header of the HTTP request.</span></span> <span data-ttu-id="f53ed-125">有关详细信息，请参阅 [odata： Atom 格式](https://www.odata.org/documentation/odata-version-2-0/atom-format/) 和 [Odata： JSON 格式](https://www.odata.org/documentation/odata-version-2-0/json-format/)。</span><span class="sxs-lookup"><span data-stu-id="f53ed-125">For more information, see [OData: Atom Format](https://www.odata.org/documentation/odata-version-2-0/atom-format/) and [OData: JSON Format](https://www.odata.org/documentation/odata-version-2-0/json-format/).</span></span>  
  
 <span data-ttu-id="f53ed-126">将数据作为 OData 源发布时，WCF 数据服务依赖于其他现有的 Internet 设备进行缓存和身份验证等操作。</span><span class="sxs-lookup"><span data-stu-id="f53ed-126">When publishing data as an OData feed, WCF Data Services relies on other existing Internet facilities for such operations as caching and authentication.</span></span> <span data-ttu-id="f53ed-127">为实现此目的，WCF 数据服务与现有的宿主应用程序和服务（如 ASP.NET、Windows Communication Foundation (WCF) ）和 Internet Information Services (IIS) 集成。</span><span class="sxs-lookup"><span data-stu-id="f53ed-127">To accomplish this, WCF Data Services integrates with existing hosting applications and services, such as ASP.NET, Windows Communication Foundation (WCF), and Internet Information Services (IIS).</span></span>  
  
## <a name="storage-independence"></a><span data-ttu-id="f53ed-128">存储独立性</span><span class="sxs-lookup"><span data-stu-id="f53ed-128">Storage Independence</span></span>  

 <span data-ttu-id="f53ed-129">尽管资源基于实体关系模型进行寻址，但 WCF 数据服务公开 OData 源，而不考虑基础数据源。</span><span class="sxs-lookup"><span data-stu-id="f53ed-129">Although resources are addressed based on an entity-relationship model, WCF Data Services expose OData feeds regardless of the underlying data source.</span></span> <span data-ttu-id="f53ed-130">WCF 数据服务接受 URI 标识的资源的 HTTP 请求后，将对该请求进行反序列化，并将该请求的表示形式传递给 WCF 数据服务提供程序。</span><span class="sxs-lookup"><span data-stu-id="f53ed-130">After WCF Data Services accepts an HTTP request for a resource that a URI identifies, the request is deserialized and a representation of that request is passed to an WCF Data Services provider.</span></span> <span data-ttu-id="f53ed-131">此提供程序将该请求转换为特定于数据源的格式，并在基础数据源上执行该请求。</span><span class="sxs-lookup"><span data-stu-id="f53ed-131">This provider translates the request into a data source-specific format and executes the request on the underlying data source.</span></span> <span data-ttu-id="f53ed-132">WCF 数据服务通过将用于处理由 OData 指定的资源的概念模型与基础数据源的特定架构进行分离，实现存储独立性。</span><span class="sxs-lookup"><span data-stu-id="f53ed-132">WCF Data Services achieves storage independence by separating the conceptual model that addresses resources prescribed by OData from the specific schema of the underlying data source.</span></span>  
  
 <span data-ttu-id="f53ed-133">WCF 数据服务与 ADO.NET 实体框架集成，使您能够创建公开关系数据的数据服务。</span><span class="sxs-lookup"><span data-stu-id="f53ed-133">WCF Data Services integrates with the ADO.NET Entity Framework to enable you to create data services that expose relational data.</span></span> <span data-ttu-id="f53ed-134">可以使用实体数据模型工具创建包含以实体形式存在的可寻址资源的数据模型，同时定义此模型与基础数据库中表之间的映射。</span><span class="sxs-lookup"><span data-stu-id="f53ed-134">You can use the Entity Data Model tools to create a data model that contains addressable resources as entities and at the same time define the mapping between this model and the tables in the underlying database.</span></span> <span data-ttu-id="f53ed-135">有关详细信息，请参阅 [实体框架提供程序](entity-framework-provider-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="f53ed-135">For more information, see [Entity Framework Provider](entity-framework-provider-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="f53ed-136">WCF 数据服务还可以创建数据服务，这些服务公开返回接口实现的任何数据结构 <xref:System.Linq.IQueryable%601> 。</span><span class="sxs-lookup"><span data-stu-id="f53ed-136">WCF Data Services also enables you to create data services that expose any data structures that return an implementation of the <xref:System.Linq.IQueryable%601> interface.</span></span> <span data-ttu-id="f53ed-137">这样您就可以创建公开 .NET Framework 类型中数据的数据服务。</span><span class="sxs-lookup"><span data-stu-id="f53ed-137">This enables you to create data services that expose data from .NET Framework types.</span></span> <span data-ttu-id="f53ed-138">当您也实现 <xref:System.Data.Services.IUpdatable> 接口时，支持创建、更新和删除操作。</span><span class="sxs-lookup"><span data-stu-id="f53ed-138">Create, update, and delete operations are supported when you also implement the <xref:System.Data.Services.IUpdatable> interface.</span></span> <span data-ttu-id="f53ed-139">有关详细信息，请参阅 [反射提供程序](reflection-provider-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="f53ed-139">For more information, see [Reflection Provider](reflection-provider-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="f53ed-140">有关 WCF 数据服务如何与这些数据访问接口集成的说明，请参阅本主题后面的体系结构关系图。</span><span class="sxs-lookup"><span data-stu-id="f53ed-140">For an illustration of how WCF Data Services integrates with these data providers, see the architectural diagram later in this topic.</span></span>  
  
## <a name="custom-business-logic"></a><span data-ttu-id="f53ed-141">自定义业务逻辑</span><span class="sxs-lookup"><span data-stu-id="f53ed-141">Custom Business Logic</span></span>  

 <span data-ttu-id="f53ed-142">通过使用 WCF 数据服务，可以轻松地通过服务操作和侦听器将自定义业务逻辑添加到数据服务。</span><span class="sxs-lookup"><span data-stu-id="f53ed-142">WCF Data Services makes it easy to add custom business logic to a data service through service operations and interceptors.</span></span> <span data-ttu-id="f53ed-143">服务操作是在可通过 URI（采用与数据资源相同的形式）进行寻址的服务器上定义的方法。</span><span class="sxs-lookup"><span data-stu-id="f53ed-143">Service operations are methods defined on the server that are addressable by URIs in the same form as data resources.</span></span> <span data-ttu-id="f53ed-144">服务操作还可以使用查询表达式语法对操作返回的数据进行筛选、排序和分页。</span><span class="sxs-lookup"><span data-stu-id="f53ed-144">Service operations can also use query expression syntax to filter, order, and page data returned by an operation.</span></span> <span data-ttu-id="f53ed-145">例如，URI `http://localhost:12345/Northwind.svc/GetOrdersByCity?city='London'&$orderby=OrderDate&$top=10&$skip=10` 表示对 Northwind 数据服务上的名为 `GetOrdersByCity` 的服务操作的调用，此调用将返回来自伦敦的客户的订单，并且会对结果进行分页并按 `OrderDate` 排序。</span><span class="sxs-lookup"><span data-stu-id="f53ed-145">For example, the URI `http://localhost:12345/Northwind.svc/GetOrdersByCity?city='London'&$orderby=OrderDate&$top=10&$skip=10` represents a call to a service operation named `GetOrdersByCity` on the Northwind data service that returns orders for customers from London, with paged results sorted by `OrderDate`.</span></span> <span data-ttu-id="f53ed-146">有关详细信息，请参阅 [服务操作](service-operations-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="f53ed-146">For more information, see [Service Operations](service-operations-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="f53ed-147">利用侦听器，可以将自定义应用程序逻辑集成到数据服务对请求或响应消息的处理中。</span><span class="sxs-lookup"><span data-stu-id="f53ed-147">Interceptors enable custom application logic to be integrated in the processing of request or response messages by a data service.</span></span> <span data-ttu-id="f53ed-148">在指定的实体集上执行查询、插入、更新或删除操作时，将调用相应的侦听器。</span><span class="sxs-lookup"><span data-stu-id="f53ed-148">Interceptors are called when a query, insert, update, or delete action occurs on the specified entity set.</span></span> <span data-ttu-id="f53ed-149">然后，侦听器可能会更改数据、执行授权策略或者甚至终止操作。</span><span class="sxs-lookup"><span data-stu-id="f53ed-149">An interceptor then may alter the data, enforce authorization policy, or even terminate the operation.</span></span> <span data-ttu-id="f53ed-150">必须为由数据服务公开的给定实体集显式注册侦听器方法。</span><span class="sxs-lookup"><span data-stu-id="f53ed-150">Interceptor methods must be explicitly registered for a given entity set that is exposed by a data service.</span></span> <span data-ttu-id="f53ed-151">有关详细信息，请参阅 [拦截](interceptors-wcf-data-services.md)程序。</span><span class="sxs-lookup"><span data-stu-id="f53ed-151">For more information, see [Interceptors](interceptors-wcf-data-services.md).</span></span>  
  
## <a name="client-libraries"></a><span data-ttu-id="f53ed-152">客户端库</span><span class="sxs-lookup"><span data-stu-id="f53ed-152">Client Libraries</span></span>  

 <span data-ttu-id="f53ed-153">OData 定义一组统一模式，用于与数据服务进行交互。</span><span class="sxs-lookup"><span data-stu-id="f53ed-153">OData defines a set of uniform patterns for interacting with data services.</span></span> <span data-ttu-id="f53ed-154">这为创建基于这些服务的可重用组件（如方便使用数据服务的客户端库）提供了机会。</span><span class="sxs-lookup"><span data-stu-id="f53ed-154">This provides an opportunity to create reusable components that are based on these services, such as client-side libraries that make it easier to consume data services.</span></span>  
  
 <span data-ttu-id="f53ed-155">WCF 数据服务包含用于基于 .NET Framework 的客户端和基于 Silverlight 的客户端应用程序的客户端库。</span><span class="sxs-lookup"><span data-stu-id="f53ed-155">WCF Data Services includes client libraries for both .NET Framework-based and Silverlight-based client applications.</span></span> <span data-ttu-id="f53ed-156">通过这些客户端库，可以使用 .NET Framework 对象与数据服务进行交互。</span><span class="sxs-lookup"><span data-stu-id="f53ed-156">These client libraries enable you to interact with data services by using .NET Framework objects.</span></span> <span data-ttu-id="f53ed-157">它们还支持基于对象的查询和 LINQ 查询、加载相关对象、更改跟踪和标识解析。</span><span class="sxs-lookup"><span data-stu-id="f53ed-157">They also support object-based queries and LINQ queries, loading related objects, change tracking, and identity resolution.</span></span> <span data-ttu-id="f53ed-158">有关详细信息，请参阅 [WCF 数据服务客户端库](wcf-data-services-client-library.md)。</span><span class="sxs-lookup"><span data-stu-id="f53ed-158">For more information, see [WCF Data Services Client Library](wcf-data-services-client-library.md).</span></span>  
  
 <span data-ttu-id="f53ed-159">除了 .NET Framework 和 Silverlight 附带的 OData 客户端库外，还有其他客户端库，使你能够在客户端应用程序中使用 OData 源，例如 PHP、AJAX 和 Java 应用程序。</span><span class="sxs-lookup"><span data-stu-id="f53ed-159">In addition to the OData client libraries included with the .NET Framework and with Silverlight, there are other client libraries that enable you to consume an OData feed in client applications, such as PHP, AJAX, and Java applications.</span></span> <span data-ttu-id="f53ed-160">有关 OData SDK 的详细信息，请参阅 [ODATA sdk-示例代码](https://www.odata.org/ecosystem/#sdk)。</span><span class="sxs-lookup"><span data-stu-id="f53ed-160">For more information on OData SDK, see [OData SDK - Sample Code](https://www.odata.org/ecosystem/#sdk).</span></span>
  
## <a name="architecture-overview"></a><span data-ttu-id="f53ed-161">体系结构概述</span><span class="sxs-lookup"><span data-stu-id="f53ed-161">Architecture Overview</span></span>  

 <span data-ttu-id="f53ed-162">下图演示了公开 OData 源并在支持 OData 的客户端库中使用这些源的 WCF 数据服务体系结构：</span><span class="sxs-lookup"><span data-stu-id="f53ed-162">The following diagram illustrates the WCF Data Services architecture for exposing OData feeds and using these feeds in OData-enabled client libraries:</span></span>  
  
 ![显示 WCF 数据服务的体系结构关系图的屏幕截图。](./media/wcf-data-services-overview/windows-communication-foundation-data-services-architecture.gif)  
  
## <a name="see-also"></a><span data-ttu-id="f53ed-164">请参阅</span><span class="sxs-lookup"><span data-stu-id="f53ed-164">See also</span></span>

- [<span data-ttu-id="f53ed-165">WCF 数据服务 4.5</span><span class="sxs-lookup"><span data-stu-id="f53ed-165">WCF Data Services 4.5</span></span>](index.md)
- [<span data-ttu-id="f53ed-166">入门</span><span class="sxs-lookup"><span data-stu-id="f53ed-166">Getting Started</span></span>](getting-started-with-wcf-data-services.md)
- [<span data-ttu-id="f53ed-167">定义 WCF 数据服务</span><span class="sxs-lookup"><span data-stu-id="f53ed-167">Defining WCF Data Services</span></span>](defining-wcf-data-services.md)
- <span data-ttu-id="f53ed-168">[访问数据服务资源（WCF 数据服务）](/previous-versions/dotnet/netframework-4.0/dd728283(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="f53ed-168">[Accessing Data Service Resources (WCF Data Services)](/previous-versions/dotnet/netframework-4.0/dd728283(v=vs.100))</span></span>
- [<span data-ttu-id="f53ed-169">WCF 数据服务客户端库</span><span class="sxs-lookup"><span data-stu-id="f53ed-169">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
- <span data-ttu-id="f53ed-170">[Representational State Transfer (REST)](https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)（表述性状态转移 (REST)）</span><span class="sxs-lookup"><span data-stu-id="f53ed-170">[Representational State Transfer (REST)](https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)</span></span>
