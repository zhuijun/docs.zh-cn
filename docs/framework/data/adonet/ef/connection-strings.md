---
title: ADO.NET 中的连接字符串实体框架
description: 了解实体框架中的连接字符串，其中包含用于连接到 ADO.NET 数据提供程序的信息，以及有关模型和映射文件的信息。
ms.date: 10/15/2018
ms.assetid: 78d516bc-c99f-4865-8ff1-d856bc1a01c0
ms.openlocfilehash: 2ae25f5881c033a84d65f5b0b4ed14b4866dbcb3
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/02/2020
ms.locfileid: "84286865"
---
# <a name="connection-strings-in-the-adonet-entity-framework"></a><span data-ttu-id="9da70-103">ADO.NET 中的连接字符串实体框架</span><span class="sxs-lookup"><span data-stu-id="9da70-103">Connection Strings in the ADO.NET Entity Framework</span></span>

<span data-ttu-id="9da70-104">连接字符串包含作为参数从数据提供程序传递到数据源的初始化信息。</span><span class="sxs-lookup"><span data-stu-id="9da70-104">A connection string contains initialization information that is passed as a parameter from a data provider to a data source.</span></span> <span data-ttu-id="9da70-105">其语法取决于数据提供程序，并且会在试图打开连接的过程中对连接字符串进行分析。</span><span class="sxs-lookup"><span data-stu-id="9da70-105">The syntax depends on the data provider, and the connection string is parsed during the attempt to open a connection.</span></span> <span data-ttu-id="9da70-106">实体框架使用的连接字符串包含用于连接到支持实体框架的基础 ADO.NET 数据提供程序的信息。</span><span class="sxs-lookup"><span data-stu-id="9da70-106">Connection strings used by the Entity Framework contain information used to connect to the underlying ADO.NET data provider that supports the Entity Framework.</span></span> <span data-ttu-id="9da70-107">它们还包含有关所需的模型和映射文件的信息。</span><span class="sxs-lookup"><span data-stu-id="9da70-107">They also contain information about the required model and mapping files.</span></span>

<span data-ttu-id="9da70-108">在访问模型，映射元数据以及连接到数据源时，EntityClient 提供程序将使用该连接字符串。</span><span class="sxs-lookup"><span data-stu-id="9da70-108">The connection string is used by the EntityClient provider when accessing model and mapping metadata and connecting to the data source.</span></span> <span data-ttu-id="9da70-109">连接字符串可通过 <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> 的 <xref:System.Data.EntityClient.EntityConnection> 属性访问或设置。</span><span class="sxs-lookup"><span data-stu-id="9da70-109">The connection string can be accessed or set through the <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> property of <xref:System.Data.EntityClient.EntityConnection>.</span></span> <span data-ttu-id="9da70-110"><xref:System.Data.EntityClient.EntityConnectionStringBuilder> 类可用于以编程方式构造或访问连接字符串中的参数。</span><span class="sxs-lookup"><span data-stu-id="9da70-110">The <xref:System.Data.EntityClient.EntityConnectionStringBuilder> class can be used to programmatically construct or access parameters in the connection string.</span></span> <span data-ttu-id="9da70-111">有关详细信息，请参阅[如何：生成 EntityConnection 连接字符串](how-to-build-an-entityconnection-connection-string.md)。</span><span class="sxs-lookup"><span data-stu-id="9da70-111">For more information, see [How to: Build an EntityConnection Connection String](how-to-build-an-entityconnection-connection-string.md).</span></span>

<span data-ttu-id="9da70-112">[实体数据模型工具](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb399249(v=vs.100))会生成一个连接字符串，该字符串存储在应用程序的配置文件中。</span><span class="sxs-lookup"><span data-stu-id="9da70-112">The [Entity Data Model tools](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb399249(v=vs.100)) generate a connection string that is stored in the application's configuration file.</span></span> <span data-ttu-id="9da70-113">在创建对象查询时，<xref:System.Data.Objects.ObjectContext> 将自动检索此连接信息。</span><span class="sxs-lookup"><span data-stu-id="9da70-113"><xref:System.Data.Objects.ObjectContext> retrieves this connection information automatically when creating object queries.</span></span> <span data-ttu-id="9da70-114">可通过 <xref:System.Data.EntityClient.EntityConnection> 属性访问 <xref:System.Data.Objects.ObjectContext> 实例所使用的 <xref:System.Data.Objects.ObjectContext.Connection%2A>。</span><span class="sxs-lookup"><span data-stu-id="9da70-114">The <xref:System.Data.EntityClient.EntityConnection> used by an <xref:System.Data.Objects.ObjectContext> instance can be accessed from the <xref:System.Data.Objects.ObjectContext.Connection%2A> property.</span></span> <span data-ttu-id="9da70-115">有关详细信息，请参阅[管理连接和事务](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="9da70-115">For more information, see [Managing Connections and Transactions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span></span>

## <a name="connection-string-syntax"></a><span data-ttu-id="9da70-116">连接字符串语法</span><span class="sxs-lookup"><span data-stu-id="9da70-116">Connection String Syntax</span></span>

<span data-ttu-id="9da70-117">若要了解连接字符串的一般语法，请参阅[连接字符串语法 |ADO.NET 中的连接字符串](../connection-strings.md#connection-string-syntax)。</span><span class="sxs-lookup"><span data-stu-id="9da70-117">To learn about the general syntax for connection strings, see [Connection string syntax | Connection Strings in ADO.NET](../connection-strings.md#connection-string-syntax).</span></span>

## <a name="connection-string-parameters"></a><span data-ttu-id="9da70-118">连接字符串参数</span><span class="sxs-lookup"><span data-stu-id="9da70-118">Connection String Parameters</span></span>

<span data-ttu-id="9da70-119">下表列出了 <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> 中的关键字值的有效名称。</span><span class="sxs-lookup"><span data-stu-id="9da70-119">The following table lists the valid names for keyword values in the <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A>.</span></span>

|<span data-ttu-id="9da70-120">关键字</span><span class="sxs-lookup"><span data-stu-id="9da70-120">Keyword</span></span>|<span data-ttu-id="9da70-121">描述</span><span class="sxs-lookup"><span data-stu-id="9da70-121">Description</span></span>|
|-------------|-----------------|
|`Provider`|<span data-ttu-id="9da70-122">此关键字在未指定 `Name` 关键字时是必需的。</span><span class="sxs-lookup"><span data-stu-id="9da70-122">Required if the `Name` keyword is not specified.</span></span> <span data-ttu-id="9da70-123">提供程序名称，用于检索基础提供程序的 <xref:System.Data.Common.DbProviderFactory> 对象。</span><span class="sxs-lookup"><span data-stu-id="9da70-123">The provider name, which is used to retrieve the <xref:System.Data.Common.DbProviderFactory> object for the underlying provider.</span></span> <span data-ttu-id="9da70-124">该值为常量。</span><span class="sxs-lookup"><span data-stu-id="9da70-124">This value is constant.</span></span><br /><br /> <span data-ttu-id="9da70-125">如果实体连接字符串中未包含 `Name` 关键字，则需要一个非空 `Provider` 关键字值。</span><span class="sxs-lookup"><span data-stu-id="9da70-125">When the `Name` keyword is not included in an entity connection string, a non-empty value for the `Provider` keyword is required.</span></span> <span data-ttu-id="9da70-126">此关键字与 `Name` 关键字互斥。</span><span class="sxs-lookup"><span data-stu-id="9da70-126">This keyword is mutually exclusive with the `Name` keyword.</span></span>|
|`Provider Connection String`|<span data-ttu-id="9da70-127">可选。</span><span class="sxs-lookup"><span data-stu-id="9da70-127">Optional.</span></span> <span data-ttu-id="9da70-128">指定要传递给基础数据源的提供程序特定的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="9da70-128">Specifies the provider-specific connection string that is passed to the underlying data source.</span></span> <span data-ttu-id="9da70-129">此连接字符串包含数据提供程序的有效关键字/值对。</span><span class="sxs-lookup"><span data-stu-id="9da70-129">This connection string contains valid keyword/value pairs for the data provider.</span></span> <span data-ttu-id="9da70-130">如果 `Provider Connection String` 无效，则当数据源计算此字符串时，将导致运行时错误。</span><span class="sxs-lookup"><span data-stu-id="9da70-130">An invalid `Provider Connection String` will cause a run-time error when it is evaluated by the data source.</span></span><br /><br /> <span data-ttu-id="9da70-131">此关键字与 `Name` 关键字互斥。</span><span class="sxs-lookup"><span data-stu-id="9da70-131">This keyword is mutually exclusive with the `Name` keyword.</span></span><br /><br /> <span data-ttu-id="9da70-132">请确保根据[ADO.NET 连接字符串](../connection-strings.md)的一般语法来转义值。</span><span class="sxs-lookup"><span data-stu-id="9da70-132">Make sure to escape the value according to the general syntax of [ADO.NET connection strings](../connection-strings.md).</span></span> <span data-ttu-id="9da70-133">例如，下面的连接字符串： `Server=serverName; User ID = userID` 。</span><span class="sxs-lookup"><span data-stu-id="9da70-133">Consider for example the following connection string: `Server=serverName; User ID = userID`.</span></span> <span data-ttu-id="9da70-134">必须对其进行转义，因为它包含分号。</span><span class="sxs-lookup"><span data-stu-id="9da70-134">It must be escaped because it contains a semicolon.</span></span> <span data-ttu-id="9da70-135">由于它不包含双引号，因此它们可以用于转义：</span><span class="sxs-lookup"><span data-stu-id="9da70-135">Since it does not contain double quotation marks, they may be used for escaping:</span></span><br /><br /> `Provider Connection String ="Server=serverName; User ID = userID";`|
|`Metadata`|<span data-ttu-id="9da70-136">此关键字在未指定 `Name` 关键字时是必需的。</span><span class="sxs-lookup"><span data-stu-id="9da70-136">Required if the `Name` keyword is not specified.</span></span> <span data-ttu-id="9da70-137">一个由竖线分隔的目录、文件和资源位置的列表，供查找元数据和映射信息使用。</span><span class="sxs-lookup"><span data-stu-id="9da70-137">A pipe-delimited list of directories, files, and resource locations in which to look for metadata and mapping information.</span></span> <span data-ttu-id="9da70-138">以下是一个示例：</span><span class="sxs-lookup"><span data-stu-id="9da70-138">The following is an example:</span></span><br /><br /> `Metadata=`<br /><br /> `c:\model &#124; c:\model\sql\mapping.msl;`<br /><br /> <span data-ttu-id="9da70-139">竖线分隔符两侧的空格将被忽略。</span><span class="sxs-lookup"><span data-stu-id="9da70-139">Blank spaces on each side of the pipe separator are ignored.</span></span><br /><br /> <span data-ttu-id="9da70-140">此关键字与 `Name` 关键字互斥。</span><span class="sxs-lookup"><span data-stu-id="9da70-140">This keyword is mutually exclusive with the `Name` keyword.</span></span>|
|`Name`|<span data-ttu-id="9da70-141">应用程序可以选择在应用程序配置文件中指定连接名称，以用于提供所需的关键字/值连接字符串值。</span><span class="sxs-lookup"><span data-stu-id="9da70-141">The application can optionally specify the connection name in an application configuration file that provides the required keyword/value connection string values.</span></span> <span data-ttu-id="9da70-142">在此情况下，无法在连接字符串中直接提供这些值。</span><span class="sxs-lookup"><span data-stu-id="9da70-142">In this case, you cannot supply them directly in the connection string.</span></span> <span data-ttu-id="9da70-143">配置文件中不允许出现 `Name` 关键字。</span><span class="sxs-lookup"><span data-stu-id="9da70-143">The `Name` keyword is not allowed in a configuration file.</span></span><br /><br /> <span data-ttu-id="9da70-144">如果连接字符串中未包含 `Name` 关键字，则需要一个非空的 Provider 关键字值。</span><span class="sxs-lookup"><span data-stu-id="9da70-144">When the `Name` keyword is not included in the connection string, a non-empty values for Provider keyword is required.</span></span><br /><br /> <span data-ttu-id="9da70-145">此关键字与所有其他连接字符串关键字互斥。</span><span class="sxs-lookup"><span data-stu-id="9da70-145">This keyword is mutually exclusive with all the other connection string keywords.</span></span>|

<span data-ttu-id="9da70-146">下面是存储在应用程序配置文件中的[AdventureWorks 销售模型](https://github.com/Microsoft/sql-server-samples/releases/tag/adventureworks)的连接字符串示例：</span><span class="sxs-lookup"><span data-stu-id="9da70-146">The following is an example of a connection string for the [AdventureWorks Sales Model](https://github.com/Microsoft/sql-server-samples/releases/tag/adventureworks) stored in the application configuration file:</span></span>

## <a name="model-and-mapping-file-locations"></a><span data-ttu-id="9da70-147">模型和映射文件位置</span><span class="sxs-lookup"><span data-stu-id="9da70-147">Model and Mapping File Locations</span></span>

<span data-ttu-id="9da70-148">`Metadata` 参数包含一个位置列表，`EntityClient` 提供程序可使用该列表来搜索模型和映射文件。</span><span class="sxs-lookup"><span data-stu-id="9da70-148">The `Metadata` parameter contains a list of locations for the `EntityClient` provider to search for model and mapping files.</span></span> <span data-ttu-id="9da70-149">模型和映射文件通常与应用程序可执行文件部署在同一目录中。</span><span class="sxs-lookup"><span data-stu-id="9da70-149">Model and mapping files are often deployed in the same directory as the application executable file.</span></span> <span data-ttu-id="9da70-150">这些文件也可以部署在特定位置或作为嵌入资源包含于应用程序中。</span><span class="sxs-lookup"><span data-stu-id="9da70-150">These files can also be deployed in a specific location or included as an embedded resource in the application.</span></span>

<span data-ttu-id="9da70-151">嵌入资源按如下方式指定：</span><span class="sxs-lookup"><span data-stu-id="9da70-151">Embedded resources are specified as follows:</span></span>

`Metadata=res://<assemblyFullName>/<resourceName>`

<span data-ttu-id="9da70-152">下列选项用于定义嵌入资源的位置：</span><span class="sxs-lookup"><span data-stu-id="9da70-152">The following options are available for defining the location of an embedded resource:</span></span>

|<span data-ttu-id="9da70-153">选项</span><span class="sxs-lookup"><span data-stu-id="9da70-153">Option</span></span>|<span data-ttu-id="9da70-154">说明</span><span class="sxs-lookup"><span data-stu-id="9da70-154">Description</span></span>|
|-|-|
|`assemblyFullName`|<span data-ttu-id="9da70-155">包含嵌入资源的程序集的完整名称。</span><span class="sxs-lookup"><span data-stu-id="9da70-155">The full name of an assembly with the embedded resource.</span></span> <span data-ttu-id="9da70-156">该名称包含简单名称、版本名称、支持的区域性以及公钥，如下所示：</span><span class="sxs-lookup"><span data-stu-id="9da70-156">The name includes the simple name, version name, supported culture, and public key, as follows:</span></span><br /><br /> `ResourceLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null`<br /><br /> <span data-ttu-id="9da70-157">资源可嵌入到应用程序能够访问的任何程序集中。</span><span class="sxs-lookup"><span data-stu-id="9da70-157">Resources can be embedded in any assembly that is accessible by the application.</span></span><br /><br /> <span data-ttu-id="9da70-158">如果为指定通配符（ \* ） `assemblyFullName` ，则实体框架运行时将按以下顺序搜索以下位置中的资源：</span><span class="sxs-lookup"><span data-stu-id="9da70-158">If you specify a wildcard (\*) for `assemblyFullName`, the Entity Framework runtime will search for resources in the following locations, in this order:</span></span><br /><br /> <span data-ttu-id="9da70-159">1. 调用程序集。</span><span class="sxs-lookup"><span data-stu-id="9da70-159">1.  The calling assembly.</span></span><br /><span data-ttu-id="9da70-160">2. 引用的程序集。</span><span class="sxs-lookup"><span data-stu-id="9da70-160">2.  The referenced assemblies.</span></span><br /><span data-ttu-id="9da70-161">3. 应用程序的 bin 目录中的程序集。</span><span class="sxs-lookup"><span data-stu-id="9da70-161">3.  The assemblies in the bin directory of an application.</span></span><br /><br /> <span data-ttu-id="9da70-162">如果文件不在这些位置，则引发异常。</span><span class="sxs-lookup"><span data-stu-id="9da70-162">If the files are not in one of these locations, an exception will be thrown.</span></span> <span data-ttu-id="9da70-163">**注意：** 使用通配符（\*）时，实体框架必须查看具有正确名称的资源的所有程序集。</span><span class="sxs-lookup"><span data-stu-id="9da70-163">**Note:**  When you use wildcard (\*), the Entity Framework has to look through all the assemblies for resources with the correct name.</span></span> <span data-ttu-id="9da70-164">若要提高性能，请指定程序集名称而不使用通配符。</span><span class="sxs-lookup"><span data-stu-id="9da70-164">To improve performance, specify the assembly name instead of the wildcard.</span></span>|
|`resourceName`|<span data-ttu-id="9da70-165">所包含的资源的名称，如 Adventureworksmodel.edmx。</span><span class="sxs-lookup"><span data-stu-id="9da70-165">The name of the included resource, such as AdventureWorksModel.csdl.</span></span> <span data-ttu-id="9da70-166">元数据服务仅查找具有以下任一扩展名的文件或资源：.csdl、.ssdl、或 .msl。</span><span class="sxs-lookup"><span data-stu-id="9da70-166">The metadata services will only look for files or resources with one of the following extensions: .csdl, .ssdl, or .msl.</span></span> <span data-ttu-id="9da70-167">如果未指定 `resourceName`，则将加载所有元数据资源。</span><span class="sxs-lookup"><span data-stu-id="9da70-167">If `resourceName` is not specified, all metadata resources will be loaded.</span></span> <span data-ttu-id="9da70-168">资源应在程序集中具有唯一的名称。</span><span class="sxs-lookup"><span data-stu-id="9da70-168">The resources should have unique names within an assembly.</span></span> <span data-ttu-id="9da70-169">如果在程序集中的不同目录中为多个文件定义了相同的名称，则 `resourceName` 必须在资源名称前面包含文件夹结构，例如 FolderName.FileName.csdl。</span><span class="sxs-lookup"><span data-stu-id="9da70-169">If multiple files with the same name are defined in different directories in the assembly, the `resourceName` must include the folder structure before the name of the resource, for example FolderName.FileName.csdl.</span></span><br /><br /> <span data-ttu-id="9da70-170">如果为 `resourceName` 指定通配符 (\*)，则无需指定 `assemblyFullName`。</span><span class="sxs-lookup"><span data-stu-id="9da70-170">`resourceName` is not required when you specify a wildcard (\*) for `assemblyFullName`.</span></span>|

> [!NOTE]
> <span data-ttu-id="9da70-171">若要提高性能，请在调用程序集中嵌入资源，调用程序集中未引用基础映射和元数据文件的非 Web 方案除外。</span><span class="sxs-lookup"><span data-stu-id="9da70-171">To improve performance, embed resources in the calling assembly, except in non-Web scenarios where there is no reference to underlying mapping and metadata files in the calling assembly.</span></span>

<span data-ttu-id="9da70-172">下面的示例加载应用程序 bin 目录中的调用程序集、引用程序集、以及其他程序集中的所有模型和映射文件。</span><span class="sxs-lookup"><span data-stu-id="9da70-172">The following example loads all the model and mapping files in the calling assembly, referenced assemblies, and other assemblies in the bin directory of an application.</span></span>

```csharp
Metadata=res://*/
```

<span data-ttu-id="9da70-173">下面的示例从 AdventureWorks 程序集加载 model.csdl 文件，并从正在运行的应用程序的默认目录加载 model.ssdl 和 model.msl 文件。</span><span class="sxs-lookup"><span data-stu-id="9da70-173">The following example loads the model.csdl file from the AdventureWorks assembly, and loads the model.ssdl and model.msl files from the default directory of the running application.</span></span>

```csharp
Metadata=res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.csdl|model.ssdl|model.msl
```

<span data-ttu-id="9da70-174">下面的示例从特定程序集加载三个指定的资源。</span><span class="sxs-lookup"><span data-stu-id="9da70-174">The following example loads the three specified resources from the specific assembly.</span></span>

```csharp
Metadata=res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.csdl|
res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.ssdl|
res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.msl
```

<span data-ttu-id="9da70-175">下面的示例从程序集中加载所有扩展名为 .csdl、.msl 和 .ssdl 的嵌入资源。</span><span class="sxs-lookup"><span data-stu-id="9da70-175">The following example loads all the embedded resources with the extensions .csdl, .msl, and .ssdl from the assembly.</span></span>

```csharp
Metadata=res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/
```

<span data-ttu-id="9da70-176">下面的示例 \\ 从已加载的程序集位置加载相对文件路径和 "datadir\metadata" 中的所有资源。</span><span class="sxs-lookup"><span data-stu-id="9da70-176">The following example loads all the resources in the relative file path plus "datadir\metadata\\" from the loaded assembly location.</span></span>

```csharp
Metadata=datadir\metadata\
```

<span data-ttu-id="9da70-177">下面的示例从已加载程序集的位置加载相对文件路径中的所有资源。</span><span class="sxs-lookup"><span data-stu-id="9da70-177">The following example loads all the resources in the relative file path from the loaded assembly location.</span></span>

```csharp
Metadata=.\
```

## <a name="support-for-the-124datadirectory124-substitution-string-and-the-web-application-root-operator-"></a><span data-ttu-id="9da70-178">支持 &#124;DataDirectory&#124; 替换字符串和 Web 应用程序根运算符（~）</span><span class="sxs-lookup"><span data-stu-id="9da70-178">Support for the &#124;DataDirectory&#124; Substitution String and the Web Application Root Operator (~)</span></span>

<span data-ttu-id="9da70-179">`DataDirectory`和 ~ 运算符 <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> 作为和关键字的一部分在中使用 `Metadata` `Provider Connection String` 。</span><span class="sxs-lookup"><span data-stu-id="9da70-179">`DataDirectory` and the ~ operator are used in the <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> as part of the `Metadata` and `Provider Connection String` keywords.</span></span> <span data-ttu-id="9da70-180"><xref:System.Data.EntityClient.EntityConnection> 将 `DataDirectory` 和 ~ 运算符分别转发给 <xref:System.Data.Metadata.Edm.MetadataWorkspace> 和存储提供程序。</span><span class="sxs-lookup"><span data-stu-id="9da70-180">The <xref:System.Data.EntityClient.EntityConnection> forwards the `DataDirectory` and the ~ operator to <xref:System.Data.Metadata.Edm.MetadataWorkspace> and the store provider, respectively.</span></span>

|<span data-ttu-id="9da70-181">术语</span><span class="sxs-lookup"><span data-stu-id="9da70-181">Term</span></span>|<span data-ttu-id="9da70-182">说明</span><span class="sxs-lookup"><span data-stu-id="9da70-182">Description</span></span>|
|----------|-----------------|
|`&#124;DataDirectory&#124;`|<span data-ttu-id="9da70-183">解析为映射和元数据文件的相对路径。</span><span class="sxs-lookup"><span data-stu-id="9da70-183">Resolves to a relative path to a mapping and metadata files.</span></span> <span data-ttu-id="9da70-184">这是通过 `AppDomain.SetData("DataDirectory", objValue)` 方法设置的值。</span><span class="sxs-lookup"><span data-stu-id="9da70-184">This is the value that is set through the `AppDomain.SetData("DataDirectory", objValue)` method.</span></span> <span data-ttu-id="9da70-185">`DataDirectory`替换字符串必须由竖线字符括起来，其名称和管道字符之间不能有任何空格。</span><span class="sxs-lookup"><span data-stu-id="9da70-185">The `DataDirectory` substitution string must be surrounded by the pipe characters and there cannot be any white space between its name and the pipe characters.</span></span> <span data-ttu-id="9da70-186">`DataDirectory` 名称不区分大小写。</span><span class="sxs-lookup"><span data-stu-id="9da70-186">The `DataDirectory` name is not case-sensitive.</span></span><br /><br /> <span data-ttu-id="9da70-187">如果名为 "DataDirectory" 的物理目录必须作为元数据路径列表的成员进行传递，请在名称的两侧或两侧添加空白。</span><span class="sxs-lookup"><span data-stu-id="9da70-187">If a physical directory named "DataDirectory" has to be passed as a member of the list of metadata paths, add white space to either or both sides of the name.</span></span> <span data-ttu-id="9da70-188">例如：`Metadata="DataDirectory1 &#124; DataDirectory &#124; DataDirectory2"`。</span><span class="sxs-lookup"><span data-stu-id="9da70-188">For example: `Metadata="DataDirectory1 &#124; DataDirectory &#124; DataDirectory2"`.</span></span> <span data-ttu-id="9da70-189">ASP.NET 应用程序将&#124; &#124;的 DataDirectory 解析为 " \<application root> /app_data" 文件夹。</span><span class="sxs-lookup"><span data-stu-id="9da70-189">An ASP.NET application resolves &#124;DataDirectory&#124; to the "\<application root>/app_data" folder.</span></span>|
|~|<span data-ttu-id="9da70-190">解析为 Web 应用程序根目录。</span><span class="sxs-lookup"><span data-stu-id="9da70-190">Resolves to the Web application root.</span></span> <span data-ttu-id="9da70-191">位于开头的 ~ 字符总是被解释为 Web 应用程序根目录运算符 (~)，不过它也可以表示有效的本地子目录。</span><span class="sxs-lookup"><span data-stu-id="9da70-191">The ~ character at a leading position is always interpreted as the Web application root operator (~), although it might represent a valid local subdirectory.</span></span> <span data-ttu-id="9da70-192">若要引用这样的本地子目录，用户应显示传递 `./~`。</span><span class="sxs-lookup"><span data-stu-id="9da70-192">To refer to such a local subdirectory, the user should explicitly pass `./~`.</span></span>|

<span data-ttu-id="9da70-193">`DataDirectory` 和 ~ 运算符仅应指定在路径的开头，放在任何其他位置将得不到解析。</span><span class="sxs-lookup"><span data-stu-id="9da70-193">`DataDirectory` and the ~ operator should be specified only at the beginning of a path, they are not resolved at any other position.</span></span> <span data-ttu-id="9da70-194">实体框架将尝试解析 `~/data`，但会将 `/data/~` 视为物理路径。</span><span class="sxs-lookup"><span data-stu-id="9da70-194">The Entity Framework will try to resolve `~/data`, but it will treat `/data/~` as a physical path.</span></span>

<span data-ttu-id="9da70-195">以 `DataDirectory` 或 ~ 运算符开头的路径不能解析为 `DataDirectory` 和 ~ 运算符分支之外的物理路径。</span><span class="sxs-lookup"><span data-stu-id="9da70-195">A path that starts with the `DataDirectory` or the ~ operator cannot resolve to a physical path outside the branch of the `DataDirectory` and the ~ operator.</span></span> <span data-ttu-id="9da70-196">例如，下面的路径将获得解析：`~`、`~/data`、`~/bin/Model/SqlServer`。</span><span class="sxs-lookup"><span data-stu-id="9da70-196">For example, the following paths will resolve: `~` , `~/data` , `~/bin/Model/SqlServer`.</span></span> <span data-ttu-id="9da70-197">下面的路径无法解析：`~/..`、`~/../other`。</span><span class="sxs-lookup"><span data-stu-id="9da70-197">The following paths will fail to resolve: `~/..`, `~/../other`.</span></span>

<span data-ttu-id="9da70-198">`DataDirectory` 和 ~ 运算符可扩展为包含子目录，如下所示：`|DataDirectory|\Model`、`~/bin/Model`</span><span class="sxs-lookup"><span data-stu-id="9da70-198">`DataDirectory` and the ~ operator can be extended to include sub-directories, as follows: `|DataDirectory|\Model`, `~/bin/Model`</span></span>

<span data-ttu-id="9da70-199">对 `DataDirectory` 替代字符串和 ~ 运算符的解析不是递归进行的。</span><span class="sxs-lookup"><span data-stu-id="9da70-199">The resolution of the `DataDirectory` substitution string and the ~ operator is non-recursive.</span></span> <span data-ttu-id="9da70-200">例如，如果 `DataDirectory` 包含 `~` 字符，则引发异常。</span><span class="sxs-lookup"><span data-stu-id="9da70-200">For example, when `DataDirectory` includes the `~` character, an exception will occur.</span></span> <span data-ttu-id="9da70-201">这样可以避免无穷递归。</span><span class="sxs-lookup"><span data-stu-id="9da70-201">This prevents an infinite recursion.</span></span>

## <a name="see-also"></a><span data-ttu-id="9da70-202">另请参阅</span><span class="sxs-lookup"><span data-stu-id="9da70-202">See also</span></span>

- [<span data-ttu-id="9da70-203">使用数据提供程序</span><span class="sxs-lookup"><span data-stu-id="9da70-203">Working with Data Providers</span></span>](working-with-data-providers.md)
- [<span data-ttu-id="9da70-204">部署注意事项</span><span class="sxs-lookup"><span data-stu-id="9da70-204">Deployment Considerations</span></span>](deployment-considerations.md)
- <span data-ttu-id="9da70-205">[管理连接和事务](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="9da70-205">[Managing Connections and Transactions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100))</span></span>
- [<span data-ttu-id="9da70-206">连接字符串</span><span class="sxs-lookup"><span data-stu-id="9da70-206">Connection Strings</span></span>](../connection-strings.md)
