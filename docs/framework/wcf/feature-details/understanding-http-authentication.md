---
title: 了解 HTTP 身份验证
description: 查看 WCF 中 HTTP 身份验证简介，包括 HTTP 身份验证方案和选择身份验证方案。
ms.date: 03/30/2017
ms.assetid: 9376309a-39e3-4819-b47b-a73982b57620
ms.openlocfilehash: 761ab7a92aa26ce1437eefa360e5b46df179e32d
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/23/2020
ms.locfileid: "85246514"
---
# <a name="understanding-http-authentication"></a><span data-ttu-id="580bd-103">了解 HTTP 身份验证</span><span class="sxs-lookup"><span data-stu-id="580bd-103">Understanding HTTP Authentication</span></span>
<span data-ttu-id="580bd-104">身份验证是判断客户端是否有资格访问资源的过程。</span><span class="sxs-lookup"><span data-stu-id="580bd-104">Authentication is the process of identifying whether a client is eligible to access a resource.</span></span> <span data-ttu-id="580bd-105">HTTP 协议支持将身份验证作为协商访问安全资源的一种方式。</span><span class="sxs-lookup"><span data-stu-id="580bd-105">The HTTP protocol supports authentication as a means of negotiating access to a secure resource.</span></span>  
  
 <span data-ttu-id="580bd-106">来自客户端的初始请求通常是匿名请求，不包含任何身份验证信息。</span><span class="sxs-lookup"><span data-stu-id="580bd-106">The initial request from a client is typically an anonymous request, not containing any authentication information.</span></span> <span data-ttu-id="580bd-107">HTTP 服务器应用程序可以拒绝匿名请求，而同时指示必须进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="580bd-107">HTTP server applications can deny the anonymous request while indicating that authentication is required.</span></span> <span data-ttu-id="580bd-108">服务器应用程序发送 WWW-Authentication 头来指示受支持的身份验证方案。</span><span class="sxs-lookup"><span data-stu-id="580bd-108">The server application sends WWW-Authentication headers to indicate the supported authentication schemes.</span></span> <span data-ttu-id="580bd-109">本文档介绍了几种 HTTP 身份验证方案，并讨论了其在 Windows Communication Foundation （WCF）中的支持。</span><span class="sxs-lookup"><span data-stu-id="580bd-109">This document describes several authentication schemes for HTTP and discusses their support in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="http-authentication-schemes"></a><span data-ttu-id="580bd-110">HTTP 身份验证方案</span><span class="sxs-lookup"><span data-stu-id="580bd-110">HTTP Authentication Schemes</span></span>  
 <span data-ttu-id="580bd-111">服务器可以指定多个身份验证方案供客户端选择。</span><span class="sxs-lookup"><span data-stu-id="580bd-111">The server can specify multiple authentication schemes for the client to choose from.</span></span> <span data-ttu-id="580bd-112">下表介绍了 Windows 应用程序中常见的一些身份验证方案。</span><span class="sxs-lookup"><span data-stu-id="580bd-112">The following table describes some of the authentication schemes commonly found in Windows applications.</span></span>  
  
|<span data-ttu-id="580bd-113">身份验证方案</span><span class="sxs-lookup"><span data-stu-id="580bd-113">Authentication Scheme</span></span>|<span data-ttu-id="580bd-114">说明</span><span class="sxs-lookup"><span data-stu-id="580bd-114">Description</span></span>|  
|---------------------------|-----------------|  
|<span data-ttu-id="580bd-115">匿名</span><span class="sxs-lookup"><span data-stu-id="580bd-115">Anonymous</span></span>|<span data-ttu-id="580bd-116">匿名请求不包含任何身份验证信息。</span><span class="sxs-lookup"><span data-stu-id="580bd-116">An anonymous request does not contain any authentication information.</span></span> <span data-ttu-id="580bd-117">这就相当于授予所有人访问资源的权限。</span><span class="sxs-lookup"><span data-stu-id="580bd-117">This is equivalent to granting everyone access to the resource.</span></span>|  
|<span data-ttu-id="580bd-118">基本</span><span class="sxs-lookup"><span data-stu-id="580bd-118">Basic</span></span>|<span data-ttu-id="580bd-119">基本身份验证发送包含客户端的用户名和密码的 Base64 编码字符串。</span><span class="sxs-lookup"><span data-stu-id="580bd-119">Basic authentication sends a Base64-encoded string that contains a user name and password for the client.</span></span> <span data-ttu-id="580bd-120">Base64 不是一种加密形式，应将其视为相当于以明文形式发送用户名和密码。</span><span class="sxs-lookup"><span data-stu-id="580bd-120">Base64 is not a form of encryption and should be considered the same as sending the user name and password in clear text.</span></span> <span data-ttu-id="580bd-121">如果需要保护资源，请务必考虑使用基本身份验证之外的身份验证方案。</span><span class="sxs-lookup"><span data-stu-id="580bd-121">If a resource needs to be protected, strongly consider using an authentication scheme other than basic authentication.</span></span>|  
|<span data-ttu-id="580bd-122">摘要</span><span class="sxs-lookup"><span data-stu-id="580bd-122">Digest</span></span>|<span data-ttu-id="580bd-123">摘要式身份验证是质询-响应方案，用于替换基本身份验证。</span><span class="sxs-lookup"><span data-stu-id="580bd-123">Digest authentication is a challenge-response scheme that is intended to replace Basic authentication.</span></span> <span data-ttu-id="580bd-124">服务器向客户端发送称为 " *nonce* " 的随机数据的字符串作为质询。</span><span class="sxs-lookup"><span data-stu-id="580bd-124">The server sends a string of random data called a *nonce* to the client as a challenge.</span></span> <span data-ttu-id="580bd-125">客户端使用在其他信息中包括用户名、密码和 Nonce 的哈希进行响应。</span><span class="sxs-lookup"><span data-stu-id="580bd-125">The client responds with a hash that includes the user name, password, and nonce, among additional information.</span></span> <span data-ttu-id="580bd-126">该交换所引入的复杂程度和数据哈希增加了窃取和重用具有此身份验证方案的用户凭据的难度。</span><span class="sxs-lookup"><span data-stu-id="580bd-126">The complexity this exchange introduces and the data hashing make it more difficult to steal and reuse the user's credentials with this authentication scheme.</span></span><br /><br /> <span data-ttu-id="580bd-127">摘要式身份验证需要使用 Windows 域帐户。</span><span class="sxs-lookup"><span data-stu-id="580bd-127">Digest authentication requires the use of Windows domain accounts.</span></span> <span data-ttu-id="580bd-128">摘要*领域*为 Windows 域名。</span><span class="sxs-lookup"><span data-stu-id="580bd-128">The digest *realm* is the Windows domain name.</span></span> <span data-ttu-id="580bd-129">因此，不能使用在不支持 Windows 域的操作系统（例如 Windows XP Home Edition）上运行的服务器来进行摘要式身份验证。</span><span class="sxs-lookup"><span data-stu-id="580bd-129">Therefore, you cannot use a server running on an operating system that does not support Windows domains, such as Windows XP Home Edition, with Digest authentication.</span></span> <span data-ttu-id="580bd-130">反而言之，如果客户端运行在不支持 Windows 域的操作系统上，则必须在身份验证过程中显式指定域帐户。</span><span class="sxs-lookup"><span data-stu-id="580bd-130">Conversely, when the client runs on an operating system that does not support Windows domains, a domain account must be explicitly specified during the authentication.</span></span>|  
|<span data-ttu-id="580bd-131">NTLM</span><span class="sxs-lookup"><span data-stu-id="580bd-131">NTLM</span></span>|<span data-ttu-id="580bd-132">NT LAN Manager (NTLM) 身份验证是质询-响应方案，是摘要式身份验证的一种更安全的变体。</span><span class="sxs-lookup"><span data-stu-id="580bd-132">NT LAN Manager (NTLM) authentication is a challenge-response scheme that is a securer variation of Digest authentication.</span></span> <span data-ttu-id="580bd-133">NTLM 使用 Windows 凭据（而不是未编码的用户名和密码）来转换质询数据。</span><span class="sxs-lookup"><span data-stu-id="580bd-133">NTLM uses Windows credentials to transform the challenge data instead of the unencoded user name and password.</span></span> <span data-ttu-id="580bd-134">NTLM 身份验证需要客户端和服务器之间的多次交换。</span><span class="sxs-lookup"><span data-stu-id="580bd-134">NTLM authentication requires multiple exchanges between the client and server.</span></span> <span data-ttu-id="580bd-135">服务器和所有参与代理都必须支持持久连接，才能成功完成身份验证。</span><span class="sxs-lookup"><span data-stu-id="580bd-135">The server and any intervening proxies must support persistent connections to successfully complete the authentication.</span></span>|  
|<span data-ttu-id="580bd-136">Negotiate</span><span class="sxs-lookup"><span data-stu-id="580bd-136">Negotiate</span></span>|<span data-ttu-id="580bd-137">协商身份验证自动在 Kerberos 协议和 NTLM 身份验证间选择，具体取决于可用性。</span><span class="sxs-lookup"><span data-stu-id="580bd-137">Negotiate authentication automatically selects between the Kerberos protocol and NTLM authentication, depending on availability.</span></span> <span data-ttu-id="580bd-138">如果 Kerberos 协议可用，则使用 Kerberos 协议；否则，尝试使用 NTLM。</span><span class="sxs-lookup"><span data-stu-id="580bd-138">The Kerberos protocol is used if it is available; otherwise, NTLM is tried.</span></span> <span data-ttu-id="580bd-139">Kerberos 身份验证比 NTLM 具有更多优势。</span><span class="sxs-lookup"><span data-stu-id="580bd-139">Kerberos authentication significantly improves upon NTLM.</span></span> <span data-ttu-id="580bd-140">Kerberos 身份验证既快于 NTLM，又允许使用相互身份验证和将凭据委托至远程计算机。</span><span class="sxs-lookup"><span data-stu-id="580bd-140">Kerberos authentication is both faster than NTLM and allows the use of mutual authentication and delegation of credentials to remote machines.</span></span>|  
|<span data-ttu-id="580bd-141">Windows Live ID</span><span class="sxs-lookup"><span data-stu-id="580bd-141">Windows Live ID</span></span>|<span data-ttu-id="580bd-142">基础 Windows HTTP 服务包括使用联合协议的身份验证。</span><span class="sxs-lookup"><span data-stu-id="580bd-142">The underlying Windows HTTP service includes authentication using federated protocols.</span></span> <span data-ttu-id="580bd-143">不过，WCF 中的标准 HTTP 传输不支持使用联合身份验证方案，如 Microsoft Windows Live ID。</span><span class="sxs-lookup"><span data-stu-id="580bd-143">However, the standard HTTP transports in WCF do not support the use of federated authentication schemes, such as Microsoft Windows Live ID.</span></span> <span data-ttu-id="580bd-144">当前，可以通过使用消息安全来获得对此功能的支持。</span><span class="sxs-lookup"><span data-stu-id="580bd-144">Support for this feature is currently available through the use of message security.</span></span> <span data-ttu-id="580bd-145">有关详细信息，请参阅[联合和颁发的令牌](federation-and-issued-tokens.md)。</span><span class="sxs-lookup"><span data-stu-id="580bd-145">For more information, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>|  
  
## <a name="choosing-an-authentication-scheme"></a><span data-ttu-id="580bd-146">选择身份验证方案</span><span class="sxs-lookup"><span data-stu-id="580bd-146">Choosing an Authentication Scheme</span></span>  
 <span data-ttu-id="580bd-147">为 HTTP 服务器选择可能的身份验证方案时，需要考虑的事项包括以下几点：</span><span class="sxs-lookup"><span data-stu-id="580bd-147">When selecting the potential authentication schemes for an HTTP server, a few items to consider include the following:</span></span>  
  
- <span data-ttu-id="580bd-148">考虑是否需要保护资源。</span><span class="sxs-lookup"><span data-stu-id="580bd-148">Consider whether the resource needs to be protected.</span></span> <span data-ttu-id="580bd-149">使用 HTTP 身份验证需要传输更多数据，并可以限制与客户端的互操作性。</span><span class="sxs-lookup"><span data-stu-id="580bd-149">Using HTTP authentication requires transmitting more data and can limit interoperability with clients.</span></span> <span data-ttu-id="580bd-150">允许匿名访问不需要保护的资源。</span><span class="sxs-lookup"><span data-stu-id="580bd-150">Allow anonymous access to resources that do not need to be protected.</span></span>  
  
- <span data-ttu-id="580bd-151">如果资源需要保护，则要考虑哪种身份验证方案可以提供所需的安全级别。</span><span class="sxs-lookup"><span data-stu-id="580bd-151">If the resource needs to be protected, consider which authentication schemes provide the required level of security.</span></span> <span data-ttu-id="580bd-152">此处讨论的安全级别最低的标准身份验证方案是基本身份验证。</span><span class="sxs-lookup"><span data-stu-id="580bd-152">The weakest standard authentication scheme discussed here is Basic authentication.</span></span> <span data-ttu-id="580bd-153">基本身份验证不保护用户的凭据。</span><span class="sxs-lookup"><span data-stu-id="580bd-153">Basic authentication does not protect the user's credentials.</span></span> <span data-ttu-id="580bd-154">安全级别最高的标准身份验证方案是协商身份验证，它将使用 Kerberos 协议。</span><span class="sxs-lookup"><span data-stu-id="580bd-154">The strongest standard authentication scheme is Negotiate authentication, resulting in the Kerberos protocol.</span></span>  
  
- <span data-ttu-id="580bd-155">服务器不应（在 WWW-Authentication 头中）提供任何它不准备接受或不足以保护受保护资源安全的方案。</span><span class="sxs-lookup"><span data-stu-id="580bd-155">A server should not present (in the WWW-Authentication headers) any scheme that it is not prepared to accept or that does not adequately secure the protected resource.</span></span> <span data-ttu-id="580bd-156">客户端可以在服务器提供的任何身份验证方案间自由选择。</span><span class="sxs-lookup"><span data-stu-id="580bd-156">Clients are free to choose between any of the authentication schemes the server presents.</span></span> <span data-ttu-id="580bd-157">某些客户端默认选择安全级别低的身份验证方案，或选择服务器列表中的第一个身份验证方案。</span><span class="sxs-lookup"><span data-stu-id="580bd-157">Some clients default to a weak authentication scheme or the first authentication scheme in the server's list.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="580bd-158">请参阅</span><span class="sxs-lookup"><span data-stu-id="580bd-158">See also</span></span>

- [<span data-ttu-id="580bd-159">传输安全概述</span><span class="sxs-lookup"><span data-stu-id="580bd-159">Transport Security Overview</span></span>](transport-security-overview.md)
- [<span data-ttu-id="580bd-160">将模拟用于传输安全</span><span class="sxs-lookup"><span data-stu-id="580bd-160">Using Impersonation with Transport Security</span></span>](using-impersonation-with-transport-security.md)
- [<span data-ttu-id="580bd-161">委托和模拟</span><span class="sxs-lookup"><span data-stu-id="580bd-161">Delegation and Impersonation</span></span>](delegation-and-impersonation-with-wcf.md)
