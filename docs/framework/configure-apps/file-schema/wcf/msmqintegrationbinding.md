---
title: <msmqIntegrationBinding>
ms.date: 03/30/2017
helpviewer_keywords:
- msmqIntegrationBinding Element
ms.assetid: edf277f3-e3bf-4ed8-9f55-83b5788430a7
ms.openlocfilehash: bc2b1648ad404ba13920d9f276c299756554b5d4
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/24/2020
ms.locfileid: "91204666"
---
# \<msmqIntegrationBinding>

<span data-ttu-id="fe70c-101">定义一个绑定，此绑定通过利用 MSMQ 路由消息来提供队列支持。</span><span class="sxs-lookup"><span data-stu-id="fe70c-101">Defines a binding that provides queuing support by routing messages through MSMQ.</span></span>  
  
[**\<configuration>**](../configuration-element.md)\
&nbsp;&nbsp;[**\<system.serviceModel>**](system-servicemodel.md)\
&nbsp;&nbsp;&nbsp;&nbsp;[**\<bindings>**](bindings.md)\
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[**\<customBinding>**](custombinding.md)\
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**\<binding>**\
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**\<msmqIntegrationBinding>**  
  
## <a name="syntax"></a><span data-ttu-id="fe70c-102">语法</span><span class="sxs-lookup"><span data-stu-id="fe70c-102">Syntax</span></span>  
  
```xml  
<msmqIntegrationBinding>
  <binding closeTimeout="TimeSpan"
           customDeadLetterQueue="Uri"
           deadLetterQueue="Uri"
           durable="Boolean"
           exactlyOnce="Boolean"
           maxReceivedMessageSize="Integer"
           maxRetryCycles="Integer"
           name="String"
           openTimeout="TimeSpan"
           receiveContextEnabled="Boolean"
           receiveErrorHandling="Drop/Fault/Move/Reject"
           receiveTimeout="TimeSpan"
           receiveRetryCount="Integer"
           retryCycleDelay="TimeSpan"
           sendTimeout="TimeSpan"
           serializationFormat="XML/Binary/ActiveX/ByteArray/Stream"
           timeToLive="TimeSpan"
           useMsmqTracing="Boolean"
           useSourceJournal="Boolean">
  </binding>
</msmqIntegrationBinding>
```  
  
## <a name="attributes-and-elements"></a><span data-ttu-id="fe70c-103">特性和元素</span><span class="sxs-lookup"><span data-stu-id="fe70c-103">Attributes and Elements</span></span>  

 <span data-ttu-id="fe70c-104">以下几节描述了特性、子元素和父元素。</span><span class="sxs-lookup"><span data-stu-id="fe70c-104">The following sections describe attributes, child elements, and parent elements</span></span>  
  
### <a name="attributes"></a><span data-ttu-id="fe70c-105">特性</span><span class="sxs-lookup"><span data-stu-id="fe70c-105">Attributes</span></span>  
  
|<span data-ttu-id="fe70c-106">属性</span><span class="sxs-lookup"><span data-stu-id="fe70c-106">Attribute</span></span>|<span data-ttu-id="fe70c-107">描述</span><span class="sxs-lookup"><span data-stu-id="fe70c-107">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="fe70c-108">closeTimeout</span><span class="sxs-lookup"><span data-stu-id="fe70c-108">closeTimeout</span></span>|<span data-ttu-id="fe70c-109">一个 <xref:System.TimeSpan> 值，指定为完成关闭操作提供的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="fe70c-109">A <xref:System.TimeSpan> value that specifies the interval of time provided for a close operation to complete.</span></span> <span data-ttu-id="fe70c-110">此值应大于或等于 <xref:System.TimeSpan.Zero>。</span><span class="sxs-lookup"><span data-stu-id="fe70c-110">This value should be greater than or equal to <xref:System.TimeSpan.Zero>.</span></span> <span data-ttu-id="fe70c-111">默认值为 00:01:00。</span><span class="sxs-lookup"><span data-stu-id="fe70c-111">The default is 00:01:00.</span></span>|  
|<span data-ttu-id="fe70c-112">customDeadLetterQueue</span><span class="sxs-lookup"><span data-stu-id="fe70c-112">customDeadLetterQueue</span></span>|<span data-ttu-id="fe70c-113">一个 URI，包含每个应用程序的死信队列（该队列用于放置已过期的消息或者放置传输或传递失败的消息）的位置。</span><span class="sxs-lookup"><span data-stu-id="fe70c-113">A URI that contains the location of the per-application dead letter queue, where messages that have expired or that have failed transfer or delivery are placed.</span></span><br /><br /> <span data-ttu-id="fe70c-114">死信队列是发送应用程序的队列管理器中的一个队列，用于放置传递失败的过期消息。</span><span class="sxs-lookup"><span data-stu-id="fe70c-114">The dead letter queue is a queue on the queue manager of the sending application for expired messages that have failed to be delivered.</span></span><br /><br /> <span data-ttu-id="fe70c-115"><xref:System.ServiceModel.MsmqBindingBase.CustomDeadLetterQueue%2A> 指定的 URI 必须使用 net.msmq 方案。</span><span class="sxs-lookup"><span data-stu-id="fe70c-115">The URI that is specified by <xref:System.ServiceModel.MsmqBindingBase.CustomDeadLetterQueue%2A> must use the net.msmq scheme.</span></span>|  
|<span data-ttu-id="fe70c-116">deadLetterQueue</span><span class="sxs-lookup"><span data-stu-id="fe70c-116">deadLetterQueue</span></span>|<span data-ttu-id="fe70c-117">一个 <xref:System.ServiceModel.MsmqBindingBase.DeadLetterQueue%2A> 值，指定要使用的死信队列（如果有）的类型。</span><span class="sxs-lookup"><span data-stu-id="fe70c-117">A <xref:System.ServiceModel.MsmqBindingBase.DeadLetterQueue%2A>.value specifying which type of dead-letter queue to use, if any</span></span><br /><br /> <span data-ttu-id="fe70c-118">死信队列是无法传递到应用程序的消息所要传输到的位置。</span><span class="sxs-lookup"><span data-stu-id="fe70c-118">A dead-letter queue is the location that messages that have failed to be delivered to the application will be transferred.</span></span><br /><br /> <span data-ttu-id="fe70c-119">对于需要 exactlyOnce 保证（即，`exactlyOnce` 属性设置为 `true`）的消息，此属性默认为 MSMQ 中系统级事务性死信队列。</span><span class="sxs-lookup"><span data-stu-id="fe70c-119">For messages that require exactlyOnce assurance (i.e., the `exactlyOnce` attribute is set to `true`), this attribute defaults to the system-wide transactional dead-letter queue in MSMQ.</span></span><br /><br /> <span data-ttu-id="fe70c-120">对于不需要保证的消息，此属性默认为 `null`。</span><span class="sxs-lookup"><span data-stu-id="fe70c-120">For messages that require no assurances, this attribute defaults to `null`.</span></span>|  
|<span data-ttu-id="fe70c-121">durable</span><span class="sxs-lookup"><span data-stu-id="fe70c-121">durable</span></span>|<span data-ttu-id="fe70c-122">一个布尔值，指示消息在队列中是持久的还是可变的。</span><span class="sxs-lookup"><span data-stu-id="fe70c-122">A Boolean value that indicates whether the message is durable or volatile in the queue.</span></span> <span data-ttu-id="fe70c-123">持久消息能够在队列管理器崩溃后保留下来，而可变消息则不能。</span><span class="sxs-lookup"><span data-stu-id="fe70c-123">A durable message survives a queue manager crash, while a volatile message does not.</span></span> <span data-ttu-id="fe70c-124">当应用程序需要较低的延迟并且可以容忍偶尔丢失消息时，可变消息是有用的。</span><span class="sxs-lookup"><span data-stu-id="fe70c-124">Volatile messages are useful when applications require lower latency and can tolerate occasional lost messages.</span></span> <span data-ttu-id="fe70c-125">如果 `exactlyOnce` 属性设置为 `true`，则消息必须为持久的消息。</span><span class="sxs-lookup"><span data-stu-id="fe70c-125">If the `exactlyOnce` attribute is set to `true`, the messages must be durable.</span></span> <span data-ttu-id="fe70c-126">默认为 `true`。</span><span class="sxs-lookup"><span data-stu-id="fe70c-126">The default is `true`.</span></span>|  
|<span data-ttu-id="fe70c-127">exactlyOnce</span><span class="sxs-lookup"><span data-stu-id="fe70c-127">exactlyOnce</span></span>|<span data-ttu-id="fe70c-128">一个布尔值，指示每个消息是否只传递一次。</span><span class="sxs-lookup"><span data-stu-id="fe70c-128">A Boolean value that indicates whether each message is delivered only once.</span></span> <span data-ttu-id="fe70c-129">然后，将通知发送方有关传递失败的信息。</span><span class="sxs-lookup"><span data-stu-id="fe70c-129">The sender will then be notified of delivery failures.</span></span> <span data-ttu-id="fe70c-130">如果 `durable` 为 `false`，则将忽略此属性并且传输消息，而不会提供传递保证。</span><span class="sxs-lookup"><span data-stu-id="fe70c-130">When `durable` is `false`, this attribute is ignored and messages are transferred without delivery assurance.</span></span> <span data-ttu-id="fe70c-131">默认值为 `true`。</span><span class="sxs-lookup"><span data-stu-id="fe70c-131">The default is `true`.</span></span> <span data-ttu-id="fe70c-132">有关详细信息，请参阅 <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A>。</span><span class="sxs-lookup"><span data-stu-id="fe70c-132">For more information, see <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A>.</span></span>|  
|<span data-ttu-id="fe70c-133">maxReceivedMessageSize</span><span class="sxs-lookup"><span data-stu-id="fe70c-133">maxReceivedMessageSize</span></span>|<span data-ttu-id="fe70c-134">一个正整数，定义此绑定所处理的最大消息大小（以字节为单位），其中包括标头。</span><span class="sxs-lookup"><span data-stu-id="fe70c-134">A positive integer that defines the maximum message size, in bytes, including headers, that is processed by this binding.</span></span> <span data-ttu-id="fe70c-135">如果消息超出此限制，则发送方将收到 SOAP 错误。</span><span class="sxs-lookup"><span data-stu-id="fe70c-135">The sender of a message exceeding this limit will receive a SOAP fault.</span></span> <span data-ttu-id="fe70c-136">接收方将删除该消息，并在跟踪日志中创建事件项。</span><span class="sxs-lookup"><span data-stu-id="fe70c-136">The receiver drops the message and creates an entry of the event in the trace log.</span></span> <span data-ttu-id="fe70c-137">默认值为 65536。</span><span class="sxs-lookup"><span data-stu-id="fe70c-137">The default is 65536.</span></span> <span data-ttu-id="fe70c-138">对消息大小进行的此限制旨在降低遭受拒绝服务 (DoS) 攻击的可能性。</span><span class="sxs-lookup"><span data-stu-id="fe70c-138">This bound on message size is intended to limit exposure to Denial of Service (DoS) attacks.</span></span>|  
|<span data-ttu-id="fe70c-139">maxRetryCycles</span><span class="sxs-lookup"><span data-stu-id="fe70c-139">maxRetryCycles</span></span>|<span data-ttu-id="fe70c-140">一个整数，指示病毒消息检测功能所使用的重试周期数。</span><span class="sxs-lookup"><span data-stu-id="fe70c-140">An integer that indicates the number of retry cycles used by the poison-message detection feature.</span></span> <span data-ttu-id="fe70c-141">如果所有周期的所有传递尝试均失败，则消息将变为病毒消息。</span><span class="sxs-lookup"><span data-stu-id="fe70c-141">A message becomes a poison message when it fails all delivery attempts of all cycles.</span></span> <span data-ttu-id="fe70c-142">默认值为 2。</span><span class="sxs-lookup"><span data-stu-id="fe70c-142">The default is 2.</span></span> <span data-ttu-id="fe70c-143">有关详细信息，请参阅 <xref:System.ServiceModel.MsmqBindingBase.MaxRetryCycles%2A>。</span><span class="sxs-lookup"><span data-stu-id="fe70c-143">For more information, see <xref:System.ServiceModel.MsmqBindingBase.MaxRetryCycles%2A>.</span></span>|  
|<span data-ttu-id="fe70c-144">name</span><span class="sxs-lookup"><span data-stu-id="fe70c-144">name</span></span>|<span data-ttu-id="fe70c-145">一个包含绑定的配置名称的字符串。</span><span class="sxs-lookup"><span data-stu-id="fe70c-145">A string that contains the configuration name of the binding.</span></span> <span data-ttu-id="fe70c-146">因为此值用作绑定的标识，所以它应该是唯一的。</span><span class="sxs-lookup"><span data-stu-id="fe70c-146">This value should be unique because it is used as an identification for the binding.</span></span> <span data-ttu-id="fe70c-147">从 .NET Framework 4 开始，绑定和行为不需要具有名称。</span><span class="sxs-lookup"><span data-stu-id="fe70c-147">Starting with .NET Framework 4, bindings and behaviors are not required to have a name.</span></span> <span data-ttu-id="fe70c-148">有关默认配置和无值绑定和行为的详细信息，请参阅[WCF 服务的](../../../wcf/samples/simplified-configuration-for-wcf-services.md)[简化配置](../../../wcf/simplified-configuration.md)和简化配置。</span><span class="sxs-lookup"><span data-stu-id="fe70c-148">For more information about default configuration and nameless bindings and behaviors, see [Simplified Configuration](../../../wcf/simplified-configuration.md) and [Simplified Configuration for WCF Services](../../../wcf/samples/simplified-configuration-for-wcf-services.md).</span></span>|  
|<span data-ttu-id="fe70c-149">openTimeout</span><span class="sxs-lookup"><span data-stu-id="fe70c-149">openTimeout</span></span>|<span data-ttu-id="fe70c-150">一个 <xref:System.TimeSpan> 值，指定为完成打开操作提供的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="fe70c-150">A <xref:System.TimeSpan> value that specifies the interval of time provided for an open operation to complete.</span></span> <span data-ttu-id="fe70c-151">此值应大于或等于 <xref:System.TimeSpan.Zero>。</span><span class="sxs-lookup"><span data-stu-id="fe70c-151">This value should be greater than or equal to <xref:System.TimeSpan.Zero>.</span></span> <span data-ttu-id="fe70c-152">默认值为 00:01:00。</span><span class="sxs-lookup"><span data-stu-id="fe70c-152">The default is 00:01:00.</span></span>|  
|<span data-ttu-id="fe70c-153">receiveErrorHandling</span><span class="sxs-lookup"><span data-stu-id="fe70c-153">receiveErrorHandling</span></span>|<span data-ttu-id="fe70c-154">一个 <xref:System.ServiceModel.ReceiveErrorHandling> 值，指定如何处理病毒消息和不可调度的消息。</span><span class="sxs-lookup"><span data-stu-id="fe70c-154">A <xref:System.ServiceModel.ReceiveErrorHandling> value that specifies how poison and nondispatchable messages are handled.</span></span>|  
|<span data-ttu-id="fe70c-155">receiveRetryCount</span><span class="sxs-lookup"><span data-stu-id="fe70c-155">receiveRetryCount</span></span>|<span data-ttu-id="fe70c-156">一个整数，指定在从应用程序队列到应用程序的消息传输失败时，队列管理器应尝试的最大立即重试次数。</span><span class="sxs-lookup"><span data-stu-id="fe70c-156">An integer that specifies the maximum number of immediate retries the queue manager should attempt if transmission of a message from the application queue to the application fails.</span></span><br /><br /> <span data-ttu-id="fe70c-157">如果达到尝试传递的最大次数且应用程序仍未访问消息，则会将消息发送到重试队列，以便在以后重新进行传递。</span><span class="sxs-lookup"><span data-stu-id="fe70c-157">If the maximum number of delivery attempts is reached and the message is not accessed by the application, then the message is sent to a retry queue for redelivery at a later time.</span></span> <span data-ttu-id="fe70c-158">将消息传输回发送队列之前的时间量由 `retryCycleDelay` 控制。</span><span class="sxs-lookup"><span data-stu-id="fe70c-158">The amount of time before the message is transferred back to the sending queue is controlled by `retryCycleDelay`.</span></span> <span data-ttu-id="fe70c-159">如果重试周期达到 `maxRetryCycles` 值，则或者将消息发送到病毒消息队列，或者将否定确认发送回发送方。</span><span class="sxs-lookup"><span data-stu-id="fe70c-159">If retry cycles reach the `maxRetryCycles` value, then the message is either sent to the poison-message queue, or a negative acknowledgement is sent back to the sender.</span></span>|  
|<span data-ttu-id="fe70c-160">receiveTimeout</span><span class="sxs-lookup"><span data-stu-id="fe70c-160">receiveTimeout</span></span>|<span data-ttu-id="fe70c-161">一个 <xref:System.TimeSpan> 值，指定为完成接收操作提供的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="fe70c-161">A <xref:System.TimeSpan> value that specifies the interval of time provided for a receive operation to complete.</span></span> <span data-ttu-id="fe70c-162">此值应大于或等于 <xref:System.TimeSpan.Zero>。</span><span class="sxs-lookup"><span data-stu-id="fe70c-162">This value should be greater than or equal to <xref:System.TimeSpan.Zero>.</span></span> <span data-ttu-id="fe70c-163">默认值为 00:10:00。</span><span class="sxs-lookup"><span data-stu-id="fe70c-163">The default is 00:10:00.</span></span>|  
|<span data-ttu-id="fe70c-164">receiveContextEnabled</span><span class="sxs-lookup"><span data-stu-id="fe70c-164">receiveContextEnabled</span></span>|<span data-ttu-id="fe70c-165">一个布尔值，指定是否启用接收上下文来处理队列中的消息。</span><span class="sxs-lookup"><span data-stu-id="fe70c-165">A Boolean that specifies if receive context for processing messages in queues is enabled.</span></span> <span data-ttu-id="fe70c-166">当此设置为时 `true` ，服务可以 "扫视" 队列中的消息以开始处理它，如果发生任何错误并且引发异常，则该消息将保留在队列中。</span><span class="sxs-lookup"><span data-stu-id="fe70c-166">When this is set to `true`, a service can "peek" a message on the queue to begin processing it, and, if anything goes wrong and an exception is thrown, it remains on the queue.</span></span> <span data-ttu-id="fe70c-167">服务还可 "锁定" 消息以便在稍后的某个时间点重试处理。</span><span class="sxs-lookup"><span data-stu-id="fe70c-167">Services can also "lock" messages in order to retry processing at a later point in time.</span></span> <span data-ttu-id="fe70c-168">ReceiveContext 提供了一种机制，用于在处理后 "完成" 消息，以便可以从队列中删除该消息。消息将不再被读取并重新写入到网络上的队列中，并且在处理过程中各个消息不会在不同的服务实例之间切换。</span><span class="sxs-lookup"><span data-stu-id="fe70c-168">ReceiveContext provides a mechanism for "completing" the message once processed so it can be removed from the queue.Messages are no longer being read and re-written to queues over the network, and individual messages aren’t bouncing across different service instances during processing.</span></span>|  
|<span data-ttu-id="fe70c-169">retryCycleDelay</span><span class="sxs-lookup"><span data-stu-id="fe70c-169">retryCycleDelay</span></span>|<span data-ttu-id="fe70c-170">一个 TimeSpan 值，指定尝试传递无法立即传递的消息时，各个重试周期之间的时间延迟。</span><span class="sxs-lookup"><span data-stu-id="fe70c-170">A TimeSpan value that specifies the time delay between retry cycles when attempting to deliver a message that could not be delivered immediately.</span></span> <span data-ttu-id="fe70c-171">该值只定义最小等待时间，因为实际等待时间可能较长。</span><span class="sxs-lookup"><span data-stu-id="fe70c-171">The value defines only the minimum wait time because actual wait time can be longer.</span></span> <span data-ttu-id="fe70c-172">默认值为 00:30:00。</span><span class="sxs-lookup"><span data-stu-id="fe70c-172">The default value is 00:30:00.</span></span> <span data-ttu-id="fe70c-173">有关详细信息，请参阅 <xref:System.ServiceModel.MsmqBindingBase.RetryCycleDelay%2A>。</span><span class="sxs-lookup"><span data-stu-id="fe70c-173">For more information, see <xref:System.ServiceModel.MsmqBindingBase.RetryCycleDelay%2A>.</span></span>|  
|<span data-ttu-id="fe70c-174">sendTimeout</span><span class="sxs-lookup"><span data-stu-id="fe70c-174">sendTimeout</span></span>|<span data-ttu-id="fe70c-175">一个 <xref:System.TimeSpan> 值，指定为完成发送操作提供的时间间隔。</span><span class="sxs-lookup"><span data-stu-id="fe70c-175">A <xref:System.TimeSpan> value that specifies the interval of time provided for a send operation to complete.</span></span> <span data-ttu-id="fe70c-176">此值应大于或等于 <xref:System.TimeSpan.Zero>。</span><span class="sxs-lookup"><span data-stu-id="fe70c-176">This value should be greater than or equal to <xref:System.TimeSpan.Zero>.</span></span> <span data-ttu-id="fe70c-177">默认值为 00:01:00。</span><span class="sxs-lookup"><span data-stu-id="fe70c-177">The default is 00:01:00.</span></span>|  
|<span data-ttu-id="fe70c-178">serializationFormat</span><span class="sxs-lookup"><span data-stu-id="fe70c-178">serializationFormat</span></span>|<span data-ttu-id="fe70c-179">定义用于消息正文序列化的格式。</span><span class="sxs-lookup"><span data-stu-id="fe70c-179">Defines the format used for serialization of the message body.</span></span> <span data-ttu-id="fe70c-180">此属性的类型为 <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat>。</span><span class="sxs-lookup"><span data-stu-id="fe70c-180">This attribute is of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat>.</span></span>|  
|<span data-ttu-id="fe70c-181">timeToLive</span><span class="sxs-lookup"><span data-stu-id="fe70c-181">timeToLive</span></span>|<span data-ttu-id="fe70c-182">一个 TimeSpan 值，指定在消息过期并放入死信队列之前消息保持有效的持续时间。</span><span class="sxs-lookup"><span data-stu-id="fe70c-182">A TimeSpan value that specifies how long the messages are valid before they are expired and put into the dead-letter queue.</span></span> <span data-ttu-id="fe70c-183">默认值为 1.00:00:00。</span><span class="sxs-lookup"><span data-stu-id="fe70c-183">The default is 1.00:00:00.</span></span><br /><br /> <span data-ttu-id="fe70c-184">设置此属性可以确保具有时效性的消息不会在由接收应用程序进行处理之前过时。</span><span class="sxs-lookup"><span data-stu-id="fe70c-184">This attribute is set to ensure that time-sensitive messages do not become stale before they are processed by the receiving applications.</span></span> <span data-ttu-id="fe70c-185">如果队列中的消息在指定时间间隔内未被接收应用程序进行处理，则称该消息为过时消息。</span><span class="sxs-lookup"><span data-stu-id="fe70c-185">A message in a queue that is not consumed by the receiving application within the time interval specified is said to be expired.</span></span> <span data-ttu-id="fe70c-186">过时消息被发送到称为“死信队列”的特殊队列中。</span><span class="sxs-lookup"><span data-stu-id="fe70c-186">Expired messages are sent to special queue called the dead letter queue.</span></span> <span data-ttu-id="fe70c-187">死信队列的位置通过 `DeadLetterQueue` 属性进行设置，或基于保证设置为适当的默认值。</span><span class="sxs-lookup"><span data-stu-id="fe70c-187">The location of the dead letter queue is set with the `DeadLetterQueue` attribute or to the appropriate default, based on assurances.</span></span>|  
|<span data-ttu-id="fe70c-188">useMsmqTracing</span><span class="sxs-lookup"><span data-stu-id="fe70c-188">useMsmqTracing</span></span>|<span data-ttu-id="fe70c-189">一个布尔值，指定是否应跟踪由此绑定处理的消息。</span><span class="sxs-lookup"><span data-stu-id="fe70c-189">A Boolean value that specifies whether messages processed by this binding should be traced.</span></span> <span data-ttu-id="fe70c-190">默认为 `false`。</span><span class="sxs-lookup"><span data-stu-id="fe70c-190">The default is `false`.</span></span> <span data-ttu-id="fe70c-191">如果启用了跟踪，则每当消息离开或到达消息队列计算机时，都会创建报告消息并将其发送到报告队列。</span><span class="sxs-lookup"><span data-stu-id="fe70c-191">When tracing is enabled, report messages are created and sent to the report queue each time the message leaves or arrives at a Message Queuing computer.</span></span>|  
|<span data-ttu-id="fe70c-192">useSourceJournal</span><span class="sxs-lookup"><span data-stu-id="fe70c-192">useSourceJournal</span></span>|<span data-ttu-id="fe70c-193">一个布尔值，指定是否应将由此绑定处理的消息的副本存储在源日志中。</span><span class="sxs-lookup"><span data-stu-id="fe70c-193">A Boolean value that specifies copies of messages processed by this binding should be stored in the source journal.</span></span> <span data-ttu-id="fe70c-194">默认为 `false`。</span><span class="sxs-lookup"><span data-stu-id="fe70c-194">The default is `false`.</span></span><br /><br /> <span data-ttu-id="fe70c-195">如果排队应用程序要保留已离开计算机传出队列的消息的记录，则可以将这些消息复制到日志队列。</span><span class="sxs-lookup"><span data-stu-id="fe70c-195">Queued applications that want to keep a record of messages that have left the computer's outgoing queue can copy the messages to a journal queue.</span></span> <span data-ttu-id="fe70c-196">在消息离开传出队列，并且接收到目标计算机已接收该消息的确认后，该消息的副本就会保留在发送计算机的系统日志队列中。</span><span class="sxs-lookup"><span data-stu-id="fe70c-196">Once a message leaves the outgoing queue and an acknowledgment is received that the message was received on the destination computer, a copy of the message is kept in the sending computer's system journal queue.</span></span>|  
  
## <a name="serializationformat-attribute"></a><span data-ttu-id="fe70c-197">{serializationFormat} 属性</span><span class="sxs-lookup"><span data-stu-id="fe70c-197">{serializationFormat} Attribute</span></span>  
  
|<span data-ttu-id="fe70c-198">值</span><span class="sxs-lookup"><span data-stu-id="fe70c-198">Value</span></span>|<span data-ttu-id="fe70c-199">描述</span><span class="sxs-lookup"><span data-stu-id="fe70c-199">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="fe70c-200">Xml</span><span class="sxs-lookup"><span data-stu-id="fe70c-200">Xml</span></span>|<span data-ttu-id="fe70c-201">XML 格式</span><span class="sxs-lookup"><span data-stu-id="fe70c-201">XML format</span></span>|  
|<span data-ttu-id="fe70c-202">二进制</span><span class="sxs-lookup"><span data-stu-id="fe70c-202">Binary</span></span>|<span data-ttu-id="fe70c-203">二进制格式</span><span class="sxs-lookup"><span data-stu-id="fe70c-203">Binary format</span></span>|  
|<span data-ttu-id="fe70c-204">ActiveX</span><span class="sxs-lookup"><span data-stu-id="fe70c-204">ActiveX</span></span>|<span data-ttu-id="fe70c-205">ActiveX 格式</span><span class="sxs-lookup"><span data-stu-id="fe70c-205">ActiveX format</span></span>|  
|<span data-ttu-id="fe70c-206">ByteArray</span><span class="sxs-lookup"><span data-stu-id="fe70c-206">ByteArray</span></span>|<span data-ttu-id="fe70c-207">将对象序列化为字节数组。</span><span class="sxs-lookup"><span data-stu-id="fe70c-207">Serializes the object to an array of bytes.</span></span>|  
|<span data-ttu-id="fe70c-208">Stream</span><span class="sxs-lookup"><span data-stu-id="fe70c-208">Stream</span></span>|<span data-ttu-id="fe70c-209">设置为流格式的正文</span><span class="sxs-lookup"><span data-stu-id="fe70c-209">The body formatted as a stream</span></span>|  
  
### <a name="child-elements"></a><span data-ttu-id="fe70c-210">子元素</span><span class="sxs-lookup"><span data-stu-id="fe70c-210">Child Elements</span></span>  
  
|<span data-ttu-id="fe70c-211">元素</span><span class="sxs-lookup"><span data-stu-id="fe70c-211">Element</span></span>|<span data-ttu-id="fe70c-212">描述</span><span class="sxs-lookup"><span data-stu-id="fe70c-212">Description</span></span>|  
|-------------|-----------------|  
|[\<security>](security-of-msmqintegrationbinding.md)|<span data-ttu-id="fe70c-213">定义绑定的安全设置。</span><span class="sxs-lookup"><span data-stu-id="fe70c-213">Defines the security settings for the binding.</span></span> <span data-ttu-id="fe70c-214">此元素的类型为 <xref:System.ServiceModel.Configuration.MsmqIntegrationSecurityElement>。</span><span class="sxs-lookup"><span data-stu-id="fe70c-214">This element is of type <xref:System.ServiceModel.Configuration.MsmqIntegrationSecurityElement>.</span></span>|  
  
### <a name="parent-elements"></a><span data-ttu-id="fe70c-215">父元素</span><span class="sxs-lookup"><span data-stu-id="fe70c-215">Parent Elements</span></span>  
  
|<span data-ttu-id="fe70c-216">元素</span><span class="sxs-lookup"><span data-stu-id="fe70c-216">Element</span></span>|<span data-ttu-id="fe70c-217">描述</span><span class="sxs-lookup"><span data-stu-id="fe70c-217">Description</span></span>|  
|-------------|-----------------|  
|[\<bindings>](bindings.md)|<span data-ttu-id="fe70c-218">此元素包含标准绑定和自定义绑定的集合。</span><span class="sxs-lookup"><span data-stu-id="fe70c-218">This element holds a collection of standard and custom bindings.</span></span>|  
  
## <a name="remarks"></a><span data-ttu-id="fe70c-219">备注</span><span class="sxs-lookup"><span data-stu-id="fe70c-219">Remarks</span></span>  

 <span data-ttu-id="fe70c-220">此绑定元素可用于启用 Windows Communication Foundation (WCF) 应用程序向使用 COM、MSMQ 本机 Api 或在命名空间中定义的类型的现有 MSMQ 应用程序发送消息和从中接收消息 <xref:System.Messaging?displayProperty=nameWithType> 。可以使用此配置元素指定对队列进行寻址的方式、传输保证、是否必须持久存储消息以及应如何对消息进行保护和身份验证。</span><span class="sxs-lookup"><span data-stu-id="fe70c-220">This binding element can be used to enable Windows Communication Foundation (WCF) applications to send messages to and receive messages from existing MSMQ applications that use either COM, MSMQ native APIs, or the types defined in the <xref:System.Messaging?displayProperty=nameWithType> namespace You can use this configuration element to specify ways to address the queue, transfer assurances, whether messages must be durably stored, and how messages should be protected and authenticated.</span></span> <span data-ttu-id="fe70c-221">有关详细信息，请参阅 [如何：与 WCF 终结点和消息队列应用程序交换消息](../../../wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)。</span><span class="sxs-lookup"><span data-stu-id="fe70c-221">For more information, see [How to: Exchange Messages with WCF Endpoints and Message Queuing Applications](../../../wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md).</span></span>  
  
## <a name="example"></a><span data-ttu-id="fe70c-222">示例</span><span class="sxs-lookup"><span data-stu-id="fe70c-222">Example</span></span>  
  
```xml  
<configuration>
  <system.ServiceModel>
    <bindings>
      <msmqIntegrationBinding>
        <binding closeTimeout="00:00:10"
                 openTimeout="00:00:20"
                 receiveTimeout="00:00:30"
                 sendTimeout="00:00:40"
                 deadLetterQueue="net.msmq://localhost/blah"
                 durable="true"
                 exactlyOnce="true"
                 maxReceivedMessageSize="1000"
                 maxImmediateRetries="11"
                 maxRetryCycles="12"
                 poisonMessageHandling="Disabled"
                 rejectAfterLastRetry="false"
                 retryCycleDelay="00:05:55"
                 timeToLive="00:11:11"
                 useSourceJournal="true"
                 useMsmqTracing="true"
                 serializationFormat="Binary">
          <security mode="None" />
        </binding>
      </msmqIntegrationBinding>
    </bindings>
  </system.ServiceModel>
</configuration>
```  
  
## <a name="see-also"></a><span data-ttu-id="fe70c-223">请参阅</span><span class="sxs-lookup"><span data-stu-id="fe70c-223">See also</span></span>

- <xref:System.ServiceModel.Configuration.MsmqIntegrationBindingElement>
- <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>
- <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBindingElement>
- [\<binding>](bindings.md)
- [<span data-ttu-id="fe70c-224">绑定</span><span class="sxs-lookup"><span data-stu-id="fe70c-224">Bindings</span></span>](../../../wcf/bindings.md)
- [<span data-ttu-id="fe70c-225">配置系统提供的绑定</span><span class="sxs-lookup"><span data-stu-id="fe70c-225">Configuring System-Provided Bindings</span></span>](../../../wcf/feature-details/configuring-system-provided-bindings.md)
- [<span data-ttu-id="fe70c-226">使用绑定配置服务和客户端</span><span class="sxs-lookup"><span data-stu-id="fe70c-226">Using Bindings to Configure Services and Clients</span></span>](../../../wcf/using-bindings-to-configure-services-and-clients.md)
- [<span data-ttu-id="fe70c-227">WCF 中的队列</span><span class="sxs-lookup"><span data-stu-id="fe70c-227">Queues in WCF</span></span>](../../../wcf/feature-details/queues-in-wcf.md)
